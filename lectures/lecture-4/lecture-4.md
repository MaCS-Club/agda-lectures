---
author: Igor Fedorov
title: Sigma и Pi типы
date: August ?? 2018
---

# Вселенные и семейства

##

Мы уже говорили о том, что для обхода парадоокса Рассела в Agda вводится специальная бесконечная иерархия типов.
```agda
Set, Set₁, Set₂ ...
```
##

В более общем случае эта цепочка типов выглядит следующим образом.
```agda
U, U₁, U₂ ...
```
где
```agda
U ⊂ U₁ ⊂ U₂ ...
```
и `Uᵢ ∈ Uᵢ₊₁` для любого `i`.

##

Элементы этой цепочки называются _вселенными_. А индексы _уровнями_.

Когда мы говорим, что `A` является _типом_ имеется ввиду, что `A` принадлжит какой-то вселенной `Uᵢ`.

## Тип уровней

```agda
data Level : Set where
  zero : Level
  suc  : (i : Level) → Level
```

##

```agda
infixl 6 _⊔_ \ --lub

_⊔_ : Level → Level → Level
_⊔_ = ?
```

##

```agda
infixl 6 _⊔_

_⊔_ : Level → Level → Level
zero  ⊔ j     = j
suc i ⊔ zero  = suc i
suc i ⊔ suc j = suc (i ⊔ j)
```

##

Функция вида `A → U`, где `U` это какая-то вселенная, называется _семейством типов_(иногда _зависимым типом_).

## Примеры

Семейство конечных множеств `Fin : ℕ → Set`.

Константные семейства типов:
```agda
const : ∀ { n m } → { A : Set n } (B : Set m) → (x : A) → Set m
const = λ B x → B
```

# Типы зависимых функций (Π-типы)

##

_Π-тип(тип зависимой функции)_ это обобщение типа функции. Элементами Π-типа являются функции тип кодомена которых может меняться в зависимости от элемента домена к которому функция применяется.

##

Название "Π-тип" используется т.к. этот тип можно рассматривать как декартово произведение над заданным типом.

##

```agda
Π : ∀ { n m }(A : Set n)(B : A → Set m) → Set(m ⊔ n) -- \Pi
Π A B = (x : A) → B x
```

##

Если в качестве `B` взять константное семейство, то зависимое произведение типов превратится просто в тип функции.

```agda
g : Π ℕ (const ℕ) -- ℕ → ℕ
g x = x + 1
```

##

_Полиморфная функция_ это функция которая принимает тип как один из своих аргументов и потом работает с элементами этого типа(или других типов сконструированных на его основе). Например:

```agda
id : Π Set (λ z → (x : z) → z) --(A : Set) → A → A
id = λ(A : Set)(x : A) → x
```

##

Π-типы также могут быть представлены как модели кванторов всеобщности.

##

```agda
Π A (λ x → P x)
```

Можно читать как `∀ x ∈ A` выполняется `P x`.

# Типы зависимых сумм (Σ-типы)

##

Название "Σ-тип" используется т.к. этот тип можно рассматривать как индексированную сумму(в смысле копроизвдения или несвязного объединения) над заданным типом.

##

```agda  
record Σ {i j} (A : Set i) (P : A → Set j) : Set (i ⊔ j) where  -- \Sigma
  constructor _,_
  field
    π₁ : A       -- \pi\_1
    π₂ : P (π₁)  -- \pi\_2
```

##

Если в качестве `B` взять константное семейство, то зависимая сумма типов превратится просто в тип произведения.


```agda  
_×_ : ∀ {i j} (A : Set i) (B : Set j) → Set (i ⊔ j)  -- \times
A × B = Σ A (const B)
```

##

Σ-типы также могут быть представлены как модели кванторов существования.

##

```agda
Σ A (λ x → P x)
```

Можно читать как `∃ x ∈ A` выполняется `P x`.

## Копроизведение(Дизъюнктное объединение)

##

Для типов `A, B : U` введём их копроизведение `A ⊎ B : U`. Оно соответствует дизъюнктному объединению и достаточно часто используется этот термин.

##

```agda
infixr 1 _⊎_ -- \u+

data _⊎_ {a b} (A : Set a) (B : Set b) : Set (a ⊔ b) where
  inj₁ : (x : A) → A ⊎ B
  inj₂ : (y : B) → A ⊎ B
```
